### MVC å’Œ MVVM åŒºåˆ«
1. MVC - model view controller
æ•°æ®ï¼ˆmodelï¼‰å‘ç”Ÿå˜åŒ– => controller å¤„ç†å’Œæ“ä½œ dom => view æ›´æ–°è§†å›¾
ç±»ä¼¼äºŽåŽŸç”Ÿ/JQuery çš„æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ä¼šå¯¼è‡´æˆ‘ä»¬éœ€è¦å…³æ³¨æ›´æ–° dom çš„ç»†èŠ‚ï¼Œéšç€é¡¹ç›®çš„å¢žå¤§ï¼Œcontrollerä¼šå˜çš„å¼‚å¸¸è‡ƒè‚¿ï¼Œè€Œä¸”éš¾ä»¥ç»´æŠ¤
2. MVVM - Model view viewModel 
æ•°æ® é€šè¿‡ viewModel æ›´æ–°åˆ°é¡µé¢ä¸Š
view çš„å˜åŠ¨é€šè¿‡ viewModel æ›´æ–°åˆ° model å±‚
ä¸Šé¢çš„è¿‡ç¨‹æˆ‘ä»¬ä¸éœ€è¦å…³æ³¨æ›´æ–° dom çš„ç»†èŠ‚ï¼Œåªéœ€è¦å…³æ³¨ æ•°æ®çš„å˜åŒ–ä»¥åŠé¡µé¢çš„æ“ä½œå³å¯
### JSX
- jsxæ˜¯jsçš„è¯­æ³•æ‹“å±•ï¼ˆè¯­æ³•ç³–ï¼‰
- ç±»ä¼¼äºŽæ¨¡ç‰ˆè¯­è¨€
- æ”¯æŒåœ¨JS ä¸­åƒå†™åŽŸç”Ÿ HTML ä¸€æ ·åŽ»å†™æ¨¡ç‰ˆ
- æœ€åŽé€šè¿‡ React.createElement è½¬ä¸º ReactElement ä¹Ÿå°±æ˜¯ VDOM
- æ€»çš„æ¥è¯´ï¼Œjsx å…¶å®žå°±æ˜¯ jsï¼Œ åªæ˜¯æ”¯æŒäº† ä¸€äº›æ¨¡ç‰ˆçš„è¯­æ³•ï¼Œç±»ä¼¼äºŽ ejsï¼Œä½†æ˜¯æœ€åŽç¼–è¯‘åŽè¿˜æ˜¯çº¯ JS

### React16ä¸ºä»€ä¹ˆè¦æ”¹é€ ç”Ÿå‘½å‘¨æœŸ
ä¸»è¦æ˜¯ä¸ºäº†é…åˆFiberæž¶æž„å¸¦æ¥çš„**å¼‚æ­¥æ¸²æŸ“**æœºåˆ¶

#### getDerivedStateFromProps
getDerivedStateFromPropsæ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œä¸ä¾èµ–ç»„ä»¶å®žä¾‹è€Œå­˜åœ¨ï¼Œå› æ­¤åœ¨è¿™ä¸ªæ–¹æ³•å†…éƒ¨æ˜¯è®¿é—®ä¸åˆ°this
getDerivedStateFromPropsä¸æ˜¯componentWillMoutçš„æ›¿ä»£å“ï¼Œå› ä¸ºä¸å€¼å¾—ä¹Ÿä¸é…ã€‚
getDerivedStateFromPropsæ˜¯ç”¨æ¥æ›¿æ¢componentWillReceivePropsï¼Œ*ä¸ºäº†è®©propsçš„å¤„ç†è¿‡ç¨‹æ›´çº¯ç²¹*
getDerivedStateFromPropsæœ‰ä¸”åªæœ‰ä¸€ä¸ªç”¨é€”ï¼š*ä½¿ç”¨propsåŽ»æ´¾ç”Ÿ/æ›´æ–°state*

#### getSnapshotBeforeUpdate
æ‰§è¡Œæ—¶æœºï¼šrenderæ–¹æ³•ä¹‹åŽï¼ŒçœŸå®ždomæ›´æ–°ä¹‹å‰
ðŸ“Œå®šä½ï¼šgetSnapshotBeforeUpdateç”Ÿå‘½å‘¨æœŸè®¾è®¡çš„åˆè¡·æ˜¯ä¸ºäº†æ­é…componentDidUpdateä¸€èµ·ï¼Œè¦†ç›–è¿‡æ—¶çš„componentWillUpdateï¼ˆä¸ºå•¥å®ƒè‚¥æ­»ä¸å¯ï¼Œå› ä¸ºå®ƒæŒ¡äº†fiberçš„è·¯ï¼ŒæŒ¡è·¯è€…æ­»ï¼‰
ä½¿ç”¨åœºæ™¯ï¼š èŽ·å–æ›´æ–°å‰çš„DOMä¿¡æ¯ï¼Œæ¯”å¦‚æ»šåŠ¨ä¿¡æ¯ï¼Œç”¨æ¥åšä¸€äº›é¡µé¢æ»šåŠ¨å¤„ç†
å¯ä»¥åŒæ—¶èŽ·å–åˆ°æ›´æ–°å‰çš„DOMå’Œæ›´æ–°å‰åŽçš„stateå’Œprops
getSnapshotBeforeUpdateçš„è¿”å›žå€¼ä½œä¸ºcomponentDidUpdateæ–¹æ³•ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥

### æ•°æ®ç®¡ç†
#### context API
è€ç‰ˆæœ¬ï¼š
1.ä»£ç ä¸å¤Ÿä¼˜é›…
2.æ— æ³•ä¿è¯æ•°æ®çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„åŠæ—¶åŒæ­¥
æ–°ç‰ˆæœ¬ï¼š
1.ä¼˜åŒ–äº†è¿™ä¸€ç‚¹ï¼Œä¿è¯äº†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§
#### Redux
> Reduxæ˜¯ä¸€ä¸ªçŠ¶æ€å®¹å™¨
> Redux å‘å¸ƒè®¢é˜…çš„å®žçŽ°æ–¹å¼ï¼Œä»¥storeä¸ºæ•°æ®ä¸­å¿ƒï¼Œä½¿ç”¨ dispatch è§¦å‘ä»Žè€Œä¿®æ”¹æ•°æ®ï¼Œä½¿ç”¨ subscribe è®¢é˜…æ•°æ®ã€‚dispatch çš„æ—¶å€™ä¼šé€šçŸ¥æ‰€æœ‰çš„ subscribe å‡½æ•°
![redux æ¨¡æ‹Ÿå®žçŽ°](./redux.js)

1.`ä»€ä¹ˆæ˜¯çŠ¶æ€å®¹å™¨`-å­˜æ”¾å…¬å…±æ•°æ®çš„ä»“åº“
ä¾‹å­ï¼šå‡å¦‚æŠŠé¡¹ç›®ä¸­çš„æ‰€æœ‰ç»„ä»¶æ‹‰åˆ°ä¸€ä¸ªé’‰é’‰ç¾¤é‡Œï¼Œé‚£Reduxå……å½“äº†è¿™ä¸ªç¾¤é‡Œçš„`ç¾¤æ–‡ä»¶`è¿™ä¸ªè§’è‰²
2.*åœ¨æ•´ä¸ªReduxçš„å·¥ä½œæµç¨‹ä¸­ï¼Œæ•°æ®æµå‘æ˜¯ä¸¥æ ¼å•å‘çš„*

### React-Hooks
ç†è§£Hooksä¹‹å‰å…ˆçœ‹ä¸€ä¸‹ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶
#### ç±»ç»„ä»¶
> å°±åƒä¸€ä¸ªé‡è£…æˆ˜èˆ°ä¸€æ ·ï¼Œå¾ˆå¼ºå¤§ï¼Œä½†æ˜¯ä¸Šæ‰‹é—¨æ§›ä¹Ÿå¾ˆé«˜ï¼Œéœ€è¦æ¸…æ¥šçš„äº†è§£æ€Žä¹ˆåŽ»æ“ä½œè¿™ä¸ªè¶…çº§æˆ˜èˆ°

é€šè¿‡ç»§æ‰¿React.Componentåˆ›å»ºï¼Œç»§æ‰¿Componentçš„stateå’Œç”Ÿå‘½å‘¨æœŸç­‰ï¼Œå¤§è€Œå…¨ï¼Œæˆ‘ç»§æ‰¿åŽå°±æ‹¥æœ‰äº†å¾ˆå¤šèƒ½åŠ›ï¼Œä»£ä»·å°±æ˜¯å­¦ä¹ æˆæœ¬ï¼Œè€Œä¸”é€»è¾‘æ˜¯å’Œç”Ÿå‘½å‘¨æœŸç²˜åˆåœ¨ä¸€èµ·çš„ï¼Œå¾ˆéš¾æŠ½ç¦»å’Œå¤ç”¨é€»è¾‘

#### å‡½æ•°ç»„ä»¶
> è½»å·§å¿«è‰‡

æ²¡æœ‰stateå’Œç”Ÿå‘½å‘¨æœŸè¿™ä¹ˆé‡çš„ä¸œè¥¿ï¼Œå­¦ä¹ æˆæœ¬å¾ˆä½Ž

#### ä¸¤è€…æœ€å¤§çš„ä¸åŒç‚¹ï¼š
[danåˆ†äº«çš„ç›¸å…³æ–‡ç« ](https://overreacted.io/zh-hans/how-are-function-components-different-from-classes/)
`Function Components capture the rendered values`
å‡½æ•°å¼ç»„ä»¶æ•èŽ·äº†æ¸²æŸ“æ‰€éœ€çš„æ•°æ®

#### hooks
> ä¸€å¥—å¼ºå¤§çš„å·¥å…·ç®±ï¼Œé‡è£…æˆ˜èˆ°é‚£äº›é¢„åˆ¶çš„èƒ½åŠ›è¿™ä¸ªå·¥å…·ç®±é‡Œå‡ ä¹Žéƒ½æœ‰ï¼Œå¼€å‘è€…å¯ä»¥çµæ´»çš„é€‰æ‹©ç”¨å“ªäº›èƒ½åŠ›ï¼Œè€Œä¸æ˜¯å…¨éƒ¨éƒ½è£…ä¸Š

#### ä¸ºä»€ä¹ˆä¼šå¼•å…¥React-Hooks
1. è®©å‡½æ•°ç»„ä»¶ä¹Ÿèƒ½å¤Ÿåšç±»ç»„ä»¶çš„äº‹ï¼Œå¯ä»¥å¤„ç†ä¸€äº›å‰¯ä½œç”¨ï¼Œèƒ½æ‹¿ ref
2. å‘Šåˆ«éš¾ä»¥ç†è§£çš„Classï¼Œä¸»è¦æ˜¯thiså’Œç”Ÿå‘½å‘¨æœŸ
3. ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘åœ¨ç±»ç»„ä»¶é‡Œæ˜¯åˆ†æ•£åœ¨å„ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼Œè€Œä¸€ä¸ªç”Ÿå‘½å‘¨æœŸä¸­å´ç³…æ‚ç€å„ç§ä¸ç›¸å…³çš„é€»è¾‘ï¼Œé€»è¾‘å’Œç”Ÿå‘½å‘¨æœŸè€¦åˆåœ¨ä¸€èµ·
    ç±»ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬æ›´å¤šçš„æ˜¯é¢å‘ç”Ÿå‘½å‘¨æœŸåŽ»ç¼–å†™é€»è¾‘ä»£ç ï¼Œå’ŒReactç†å¿µç›¸æ‚–ï¼Œåº”è¯¥å…³æ³¨çš„æ˜¯æ•°æ®çš„å˜åŒ–ï¼Œå½“æŸä¸ªæ•°æ®å‘å£°å˜åŒ–è¦åšä»€ä¹ˆï¼Œå°±åƒä¹‹å‰é‚£ä¸ªå¾ˆç»å…¸çš„å…¬å¼UI = render(data);
4. ä½¿çŠ¶æ€é€»è¾‘å¤ç”¨å˜å¾—ç®€å•,è¿‡åŽ»å¤ç”¨é€»è¾‘æ›´å¤šçš„æ˜¯é HOCæˆ–è€…Render Propsï¼Œä»–ä»¬åœ¨å®žçŽ°é€»è¾‘å¤ç”¨çš„åŒæ—¶ä¹Ÿç ´åè€…ç»„ä»¶ç»“æž„ï¼Œæœ€å¸¸ è§çš„å°±æ˜¯åµŒå¥—åœ°ç‹±
5. å‡½æ•°ç»„ä»¶ä»Žè®¾è®¡æ€æƒ³è§’åº¦æ¥çœ‹æ›´åŠ å¥‘åˆReactç†å¿µ

#### ç†æ€§çœ‹å¾…Hooks
1. Hooksæš‚æ—¶è¿˜æ²¡æœ‰è¡¥é½ç±»ç»„ä»¶çš„èƒ½åŠ›ï¼Œæ¯”å¦‚getSnapshotBeforeUpdateã€componentDidCatch,è¿™äº›ç”Ÿå‘½å‘¨æœŸè¿˜æ˜¯å¼ºä¾èµ–ç±»ç»„ä»¶

#### React Hooks æ˜¯å¦‚ä½•æ¨¡æ‹Ÿç”Ÿå‘½å‘¨æœŸçš„
```js
import { useEffect } from 'react';

useEffect(() => {
    console.log('mock:componentDidMount');
    return () => {
        console.log('mock:componentWillUnmount');
    }
}, []);

useEffect(() => {
    console.log('mock:componentDidUpdate');
});

useEffect(() => {
    console.log('mock:componentWillReceiveProps');
}, [props]);
```

### VDOM
#### Reacté€‰ç”¨VDOMæ˜¯ä¸ºäº†æ›´å¥½çš„æ€§èƒ½å—
åœ¨æ•´ä¸ªDOMæ“ä½œçš„æ¼”åŒ–è¿‡ç¨‹ä¸­ï¼Œä¸»è¦çŸ›ç›¾å¹¶ä¸åœ¨äºŽæ€§èƒ½ï¼Œè€Œåœ¨äºŽå¼€å‘è€…æ˜¯å¦èƒ½æœ‰è¾ƒå¥½çš„ç ”å‘ä½“éªŒå’Œç ”å‘æ•ˆçŽ‡
**è™šæ‹ŸDOMä¼˜è¶Šä¹‹å¤„åœ¨äºŽï¼Œå®ƒèƒ½æä¾›æ›´ä¾¿æ·ã€é«˜æ•ˆçš„ç ”å‘æ¨¡å¼çš„åŒæ—¶ï¼Œè¿˜èƒ½å¤Ÿä¿æŒè¾ƒä¸ºç¨³å®šçš„æ€§èƒ½è¡¨çŽ°**

#### çœŸæ­£ä»·å€¼
1. ç ”å‘ä½“éªŒã€ç ”å‘æ•ˆçŽ‡
2. è·¨å¹³å°çš„é—®é¢˜
3. å·®é‡æ›´æ–°å’Œæ‰¹é‡æ›´æ–°


### Diff
react çš„diffåŸºäºŽcurrentIndex å’ŒlastIndex è¿›è¡ŒåŒå±‚æ¯”è¾ƒï¼Œä»Žæ–°çš„ VDOM çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹ï¼ŒåŽ»å¯»æ‰¾ä¸Šå‡å­åºåˆ—ï¼ˆðŸ“¢ï¼šè¿™é‡Œæ‰¾çš„å¹¶ä¸æ˜¯æœ€é•¿çš„ä¸Šå‡å­åºåˆ—ï¼Œåªæ˜¯ä»Žç¬¬ 0 é¡¹å¼€å§‹æ‰¾ï¼Œä¹Ÿå°±æ˜¯ä»Žç¬¬ 0 ä¸ªå¼€å§‹å’Œ older VDOM åŽ»å¯¹æ¯”ï¼Œæ‰¾åˆ°ä¸ç›¸äº¤çš„çº¿ï¼Œä¹Ÿå°±æ˜¯æœ€é•¿å…¬å…±å­åºåˆ—ï¼‰ï¼Œå› ä¸ºæœ€é•¿çš„ä¸Šå‡å­åºåˆ—ä¸ä¸€å®šæ˜¯ä»Ž 0 å¼€å§‹çš„

vue3.x çš„diffæ˜¯æ‰¾çš„æœ€é•¿ä¸Šå‡å­åºåˆ—
#### 15ç‰ˆæœ¬
1. å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œç›¸åŒç±»åž‹çš„ç»„ä»¶å…¶DOMç»“æž„ä¹Ÿç›¸åŒ
* å¦‚æžœç±»åž‹ç›¸åŒåˆ™è¿›ä¸€æ­¥å¯¹æ¯”ï¼Œå¦‚æžœä¸åŒï¼Œåˆ™åˆ é™¤æ›¿æ¢ç­‰æ“ä½œ
2. å¯¹æ¯”æ˜¯åœ¨ç›¸åŒå±‚çº§ä¸Šè¿›è¡Œçš„å¯¹æ¯”ï¼Œå› ä¸ºå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå¾ˆå°‘ä¼šåšDOMç»“æž„çš„è·¨å±‚çº§æ“ä½œï¼Œè€Œä¸”è¿™ç§è·¨å±‚çº§æ“ä½œçš„å¼€é”€æ¯”è¾ƒå¤§ï¼ŒReactå®˜æ–¹ä¹Ÿä¸å»ºè®®è¿™ä¹ˆåšã€‚é¡¹ç›®ä¸­åº”å°½å¯èƒ½ä¿è¯DOMç»“æž„çš„ç¨³å®šæ€§
3. keyå¯ä»¥åœ¨åŒå±‚å¯¹æ¯”çš„æ—¶å€™å¯ä»¥å¤ç”¨èŠ‚ç‚¹

#### 16ç‰ˆæœ¬
ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ

### Fiber
æ ¸å¿ƒï¼šå¯ä¸­æ–­ã€å¯æ¢å¤ã€ä¼˜å…ˆçº§


### ReactDOM.renderå’ŒReactDOM.createRoot
ReactDOM.renderï¼šåŒæ­¥æ‰§è¡Œï¼Œä¸€æ°”å‘µæˆ
ReactDOM.createRootï¼šå¼‚æ­¥æ‰§è¡Œï¼ˆçœ‹æƒ…å†µçš„ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯åŒæ­¥æ‰§è¡Œï¼‰
åŒºåˆ«æ˜¯fiberä¸Šé¢çš„modeï¼Œåœ¨scheduleUpdateOnFiberä¸­ä¼šåŽ»åˆ¤æ–­ï¼Œå¦‚æžœæ˜¯åŒæ­¥ï¼Œåˆ™è°ƒç”¨performSyncWorkOnRootï¼Œå¦åˆ™èµ°å¼‚æ­¥

### äº‹ä»¶ç³»ç»Ÿ
16 å’Œ 18 åŒºåˆ«
#### 16
1. æ˜¯åœ¨completeWorké˜¶æ®µåŽ»æ”¶é›†å’ŒæŒ‚è½½çš„

2. åˆæˆäº‹ä»¶å¯¹è±¡ä¼šè¢«æ”¾è¿›ä¸€ä¸ªå«åšâ€œäº‹ä»¶æ± â€çš„åœ°æ–¹ç»Ÿä¸€ç®¡ç†ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯èƒ½å¤Ÿå®žçŽ°äº‹ä»¶å¯¹è±¡çš„å¤ç”¨ï¼Œä»Žè€Œæé«˜æ€§èƒ½ã€‚
```javascript
    function handleChange(e) {
        // this won't work because the event object gets reused.
        setTimeout(() => {
            // è¿™ä¸ªåœ°æ–¹å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºäº‹ä»¶å¯¹è±¡å·²ç»å›žæ”¶
            console.log(e.target.value); // too late
        });
    }
```
3. æŒ‰éœ€ç»‘å®šï¼Œå¦‚æžœåœ¨completeWorké˜¶æ®µè¿›è¡Œå„ä¸ªèŠ‚ç‚¹çš„propsä¸Šé¢çš„äº‹ä»¶æ”¶é›†çš„æ—¶å€™ï¼Œå¦‚æžœå½“å‰äº‹ä»¶å·²ç»ç›‘å¬äº†ï¼Œé‚£ç›´æŽ¥æŠŠcbpushè¿›é˜Ÿåˆ—é‡Œå°±å¥½äº†ï¼Œæ²¡æœ‰åˆ™åœ¨documentä¸Šç»‘å®šç›‘å¬

4. æ‰§è¡Œæ—¶æœºï¼šæ˜¯åœ¨åŽŸç”Ÿçš„æ•èŽ·å’Œå†’æ³¡ä¹‹åŽæ‰æ‰§è¡Œåˆæˆäº‹ä»¶çš„æ•èŽ·å’Œå†’æ³¡

#### 18
1. æ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºå®ŒfiberRootå’ŒrootFiberä¹‹åŽå°±ç»‘å®šäº‹ä»¶ç›‘å¬ï¼Œå…¨é‡ç›‘å¬

2. åŽ»é™¤äº†äº‹ä»¶æ± ï¼Œå¦‚æžœäº‹ä»¶è§¦å‘äº†ï¼Œä¼šåŽ»åˆ¤æ–­å½“å‰è§¦å‘çš„äº‹ä»¶æœ‰æ²¡æœ‰å¯¹åº”çš„listenersï¼Œå¦‚æžœæ²¡æœ‰åˆ™è·³è¿‡

3. æ‰§è¡Œæ—¶æœºï¼š æ‰§è¡ŒåŽŸç”Ÿäº‹ä»¶çš„æ•èŽ· => åˆæˆäº‹ä»¶çš„æ•èŽ· => åŽŸç”Ÿäº‹ä»¶çš„å†’æ³¡ => åˆæˆäº‹ä»¶çš„å†’æ³¡ã€‚æ³¨æ„ï¼šè¿™é‡Œé¢å¹¶ä¸æ˜¯æ‰§è¡Œå®Œæ‰€æœ‰çš„åŽŸç”Ÿæ•èŽ·äº‹ä»¶ä»¥åŽæ‰æ‰§è¡Œåˆæˆæ•èŽ·äº‹ä»¶ï¼Œè€Œä¸”ä»Žæ ¹èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æ•èŽ·çš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥æ¯ä¸ªèŠ‚ç‚¹æ˜¯å¦æœ‰åŽŸç”Ÿæ•èŽ·äº‹ä»¶ï¼Œå¦‚æžœæœ‰å°±å…ˆæ‰§è¡ŒåŽŸç”Ÿæ•èŽ·äº‹ä»¶ï¼Œå¦‚æžœæ²¡æœ‰å°±æ£€æŸ¥è¯¥èŠ‚ç‚¹æœ‰æ²¡æœ‰åˆæˆæ•èŽ·äº‹ä»¶ï¼Œå¦‚æžœæœ‰å°±æ‰§è¡Œ

4. æ•´ä¸ªè¿‡ç¨‹æ˜¯äº¤æ›¿æ‰§è¡Œçš„ï¼Œåªæ˜¯æ¯ä¸ªDOMèŠ‚ç‚¹å…ˆæ£€æŸ¥åŽŸç”Ÿäº‹ä»¶ï¼Œç„¶åŽå†æ£€æŸ¥åˆæˆäº‹ä»¶

#### æ€»ç»“
å› ä¸º16çš„åˆæˆäº‹ä»¶æ‰§è¡Œæ—¶æœºï¼Œå¯¼è‡´äº†å¦‚æžœæˆ‘åŽ»é˜»æ­¢å†’æ³¡æ˜¯é˜»æ­¢ä¸äº†åŽŸç”Ÿäº‹ä»¶çš„å†’æ³¡äº‹ä»¶çš„
ä¸‹é¢æ˜¯ç›¸åº”çš„è§£é‡Šï¼š
![](./syntheticEvent1.png)
![](./syntheticEvent2.png)

### react18å–æ¶ˆäº†Effect listï¼Œå–è€Œä»£ä¹‹çš„æ˜¯éåŽ†æ•´ä¸ªfiberæ ‘
- åœ¨18ç‰ˆæœ¬ä¹‹å‰ï¼ŒbeginWorké˜¶æ®µæ˜¯è‡ªé¡¶å‘ä¸‹æ·±åº¦ä¼˜å…ˆéåŽ†çš„ï¼Œç„¶åŽå¦‚æžœé‡åˆ°å¶å­èŠ‚ç‚¹å°±ä¼šè§¦å‘å½“å‰èŠ‚ç‚¹çš„completeWorkï¼Œé‚£completeWorkè‡ªä¸‹å‘ä¸Šå›žåˆ°è·ŸèŠ‚ç‚¹ï¼Œé‚£æ—¢ç„¶å›žéƒ½å›žåŽ»äº†ï¼Œä¸å¦‚æŠŠeffectæ”¶é›†ä¸€ä¸‹ï¼Œä»Žè€Œè®©commité˜¶æ®µåäº«å…¶æˆï¼Œç›´æŽ¥æ‹¿completeWorké˜¶æ®µçš„æˆæžœç”¨ã€‚ç„¶åŽå°±æœ‰äº†completeWorkçš„EffectList

- ä½†æ˜¯åœ¨ React18 ä¸­å–æ¶ˆäº†è¿™ä¸ªeffectListæ•°æ®ç»“æž„ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯åœ¨ commit é˜¶æ®µéåŽ†æ•´ä¸ªfiberæ ‘ï¼ŒsubtreeFlagsè¾…åŠ©æå‡æ€§èƒ½ï¼ˆæ¯ä¸ªéœ€è¦æ›´æ–°çš„èŠ‚ç‚¹éƒ½ä¼šæ‰“ä¸Š flagï¼Œç„¶åŽå‘ä¸Šåé¦ˆåˆ°çˆ¶èŠ‚ç‚¹ä¸Šï¼Œå¦‚æžœçˆ¶èŠ‚ç‚¹çš„subtreeFlags === NoFlags é‚£å°±ä¸ç”¨å‘ä¸‹ç»§ç»­éåŽ†äº†ï¼‰

### redux
1. ä¸ºä»€ä¹ˆéœ€è¦redux
å‰ç«¯å¤æ‚æ€§å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ç”±äºŽå¤§é‡çš„æ— åºçš„æ“ä½œå¯¼è‡´çš„ã€‚
æ¯”å¦‚ä¸€ä¸ªå¤æ‚çš„é¡¹ç›®ä¸­å¯èƒ½å­˜åœ¨çˆ¶å­ã€å­çˆ¶ã€å…„å¼Ÿã€è·¨å±‚çº§æˆ–è€…æ˜¯åå‘æ•°æ®æµç­‰ï¼Œæ•´ä¸ªé¡¹ç›®çš„æ•°æ®å¤„ç†ä¼šå˜å¾—å¼‚å¸¸å¤æ‚ä¸”éš¾ä»¥è¿½è¸ªæ•°æ®çš„å˜åŒ–ã€‚
===> reduxçš„ç›®æ ‡æ˜¯ï¼š1.è®©stateçš„å˜å¾—å¯é¢„æµ‹ï¼›2.ç»Ÿä¸€ç®¡ç†åŠ¨ä½œå’ŒçŠ¶æ€

2. applymiddlewareæºç ä¸­æœ‰æ‰§è¡Œæ¯ä¸ªmiddlewareç„¶åŽä¼ å…¥middleWareAPIï¼Œå…¶ä¸­dispatchä¸ºä»€ä¹ˆç”¨ä¸€ä¸ªåŒ¿åå‡½æ•°åŒ…è£¹
å› ä¸ºè¦ä¿è¯è¢«æ´¾å‘åˆ°æ¯ä¸ªä¸­é—´ä»¶çš„ä¸­çš„dispatchéƒ½æ˜¯åŒä¸€ä¸ªä¸”æ˜¯æœ€æ–°çš„

### React18ä¸­çš„Automatic batching
[](https://github.com/reactwg/react-18/discussions/21)

### ä¸ºä»€ä¹ˆuseStateä½¿ç”¨æ•°ç»„è€Œä¸æ˜¯å¯¹è±¡
- è§£æž„èµ‹å€¼çš„é—®é¢˜ï¼š
æ•°ç»„ä¾æ¬¡æŽ’åºçš„ï¼Œæ‰€ä»¥å¯ä»¥éšä¾¿å‘½å
å¯¹è±¡ä¸è¡Œï¼Œè€Œä¸”è¦å¯¹åº”ä¸Š

### react Hooksä¸ºä»€ä¹ˆä¸èƒ½å†™åœ¨å¾ªçŽ¯æˆ–è€…ifè¯­å¥ä¸­
é‚£ä¹ˆ React æ€Žä¹ˆçŸ¥é“å“ªä¸ª state å¯¹åº”å“ªä¸ªÂ `useState`ï¼Ÿ
ç­”æ¡ˆæ˜¯ React é çš„æ˜¯ Hook è°ƒç”¨çš„é¡ºåºã€‚
åªè¦ Hook çš„è°ƒç”¨é¡ºåºåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ä¿æŒä¸€è‡´ï¼ŒReact å°±èƒ½æ­£ç¡®åœ°å°†å†…éƒ¨ state å’Œå¯¹åº”çš„ Hook è¿›è¡Œå…³è”ã€‚
[Hook è§„åˆ™](https://zh-hans.reactjs.org/docs/hooks-rules.html)

### useEffect å’Œ useLayoutEffect åŒºåˆ«
- æ‰§è¡Œæ—¶æœºä¸åŒ
- useEffect æ˜¯å¼‚æ­¥çš„
- useLayoutEffect æ˜¯åŒæ­¥çš„

### useInsertionEffect
useInsertionEffect æ‰§è¡Œåœ¨ dom æ›´æ–°ä¹‹å‰ï¼Œæ‰€ä»¥æ­¤æ—¶å¯ä»¥åšä¸€äº›domå¤„ç†ï¼Œæ¯”å¦‚ CSS-IN-JSï¼Œä»Žè€Œå‡å°‘ä¸å¿…è¦çš„é‡ç»˜å’Œé‡æŽ’

### ä¸ºä»€ä¹ˆä¸å»ºè®®ç”¨ index ä½œä¸º key
1. å¦‚æžœç ´åäº† index é¡ºåºä¼šé€ æˆä¸å¿…è¦çš„æ¸²æŸ“ï¼Œæ¯”å¦‚é€†åºæ·»åŠ 
2. æ•°æ®é”™ä½
[å‚è€ƒ](https://www.cnblogs.com/yingzi1028/p/16647253.html)

### React å¯¹äºŽå¼‚æ­¥ï¼ˆä½Žä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼‰è°ƒåº¦ï¼ˆæ¨¡æ‹Ÿå®žçŽ°çš„ requestIdleCallbckï¼‰
- requestHostCallback => schedulePerformWorkUntilDeadline
- å¦‚æžœæ˜¯æµè§ˆå™¨æ¨¡å¼ä¸‹ï¼Œä½¿ç”¨ MessageChannel å‘å¸ƒè®¢é˜…çš„æ¨¡å¼åŽ»è°ƒåº¦
- å¦‚æžœæ˜¯éžæµè§ˆå™¨æ¨¡å¼ä¸‹ï¼Œä½¿ç”¨ setTimeout åŽ»è°ƒåº¦
=> å½“ç„¶ï¼Œå®˜æ–¹ä¹Ÿåœ¨ä»£ç é‡Œæ³¨é‡Š
```js
// We prefer MessageChannel because of the 4ms setTimeout clamping.
```

### useTransition çš„ä½œç”¨
- useTransition is a React Hook that lets you update the state without blocking the UI.
- ç”¨æ³•ï¼š
```js
function TabContainer() {
  const [isPending, startTransition] = useTransition();
  const [tab, setTab] = useState('about');

  function selectTab(nextTab) {
    startTransition(() => {
      setTab(nextTab);
    });
  }
  // ...
}
```
- è¯´ç™½äº†ï¼Œå°±æ˜¯æˆ‘é€šè¿‡ starTransition åŒ…è£¹çš„ callback ä¼šè¿›è¡Œå¼‚æ­¥è°ƒåº¦ã€‚
- ä¾‹å­ï¼šæ¯”å¦‚è¯´é¡µé¢ä¸Šæœ‰ä¸€ä¸ª Input æ¡†ï¼Œç„¶åŽåœ¨ Input ä¸­è¾“å…¥å†…å®¹çš„åŒæ—¶è¦åšä¸¤ä»¶äº‹ï¼š
    1. éœ€è¦å°†è¾“å…¥çš„å†…ç­’å›žæ˜¾åˆ°Inputæ¡†ä¸­ï¼ˆå—æŽ§ç»„ä»¶ï¼‰
    2. å°†è¾“å…¥çš„å†…å®¹ç»˜åˆ¶æˆä¸€åƒè¡Œåˆ—è¡¨
```js
function Page() {
    const [val, setVal] = useState('');
    const [list, setList] = useState([]);

    const handleChange = (e) => {
        const curVal = e.target.value;
        setVal(curVal);

        const curArr = [];
        for(let i = 0; i < 1000; i++) {
            curArr.push(`${i}-${curVal}`);
        }
        setList(curArr);
    }

    return (
        <div>
            <Input onChange={handleChange} value={val} /> 
        </div>
    )
}
```
- æŒ‰ç…§ä¸Šé¢è¿™ä¹ˆå†™ï¼Œinputåœ¨è¾“å…¥çš„æ—¶å€™è‚¯å®šä¼šæœ‰å¡é¡¿çš„æ„Ÿè§‰ï¼Œå› ä¸ºæ¯æ¬¡changeçš„æ—¶å€™éƒ½è¦æ¸²æŸ“ listï¼ŒsetVal(curVal) å’Œ setList(curArr) çš„ä¼˜å…ˆçº§æ˜¯ä¸€æ ·çš„
- ä½†æ˜¯ï¼ŒsetList(curArr) çš„ä¼˜å…ˆçº§æ˜Žæ˜¾æ˜¯ä½ŽäºŽ setVal(curVal)
- è¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°äº† useTransitionï¼Œæ‰‹åŠ¨å°† æŸäº›ä»»åŠ¡é™ä½Žä¼˜å…ˆçº§
```js
function Page() {
    const [val, setVal] = useState('');
    const [list, setList] = useState([]);
    const [isPending, startTransition] = useTransition();

    const handleChange = (e) => {
        const curVal = e.target.value;
        setVal(curVal);

        startTransition(() => {
            const curArr = [];
            for(let i = 0; i < 1000; i++) {
                curArr.push(`${i}-${curVal}`);
            }
            setList(curArr);
        });
    }

    return (
        <div>
            <Input onChange={handleChange} value={val} /> 
        </div>
    )
}
```