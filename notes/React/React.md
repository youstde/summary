### MVC å’Œ MVVM åŒºåˆ«
1. MVC - model view controller
æ•°æ®ï¼ˆmodelï¼‰å‘ç”Ÿå˜åŒ– => controller å¤„ç†å’Œæ“ä½œ dom => view æ›´æ–°è§†å›¾
ç±»ä¼¼äºåŸç”Ÿ/JQuery çš„æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ä¼šå¯¼è‡´æˆ‘ä»¬éœ€è¦å…³æ³¨æ›´æ–° dom çš„ç»†èŠ‚ï¼Œéšç€é¡¹ç›®çš„å¢å¤§ï¼Œcontrollerä¼šå˜çš„å¼‚å¸¸è‡ƒè‚¿ï¼Œè€Œä¸”éš¾ä»¥ç»´æŠ¤
2. MVVM - Model view viewModel 
æ•°æ® é€šè¿‡ viewModel æ›´æ–°åˆ°é¡µé¢ä¸Š
view çš„å˜åŠ¨é€šè¿‡ viewModel æ›´æ–°åˆ° model å±‚
ä¸Šé¢çš„è¿‡ç¨‹æˆ‘ä»¬ä¸éœ€è¦å…³æ³¨æ›´æ–° dom çš„ç»†èŠ‚ï¼Œåªéœ€è¦å…³æ³¨ æ•°æ®çš„å˜åŒ–ä»¥åŠé¡µé¢çš„æ“ä½œå³å¯
### JSX
jsxæ˜¯jsçš„è¯­æ³•æ‹“å±•ï¼ˆè¯­æ³•ç³–ï¼‰

### React16ä¸ºä»€ä¹ˆè¦æ”¹é€ ç”Ÿå‘½å‘¨æœŸ
ä¸»è¦æ˜¯ä¸ºäº†é…åˆFiberæ¶æ„å¸¦æ¥çš„**å¼‚æ­¥æ¸²æŸ“**æœºåˆ¶

#### getDerivedStateFromProps
getDerivedStateFromPropsæ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œä¸ä¾èµ–ç»„ä»¶å®ä¾‹è€Œå­˜åœ¨ï¼Œå› æ­¤åœ¨è¿™ä¸ªæ–¹æ³•å†…éƒ¨æ˜¯è®¿é—®ä¸åˆ°this
getDerivedStateFromPropsä¸æ˜¯componentWillMoutçš„æ›¿ä»£å“ï¼Œå› ä¸ºä¸å€¼å¾—ä¹Ÿä¸é…ã€‚
getDerivedStateFromPropsæ˜¯ç”¨æ¥æ›¿æ¢componentWillReceivePropsï¼Œ*ä¸ºäº†è®©propsçš„å¤„ç†è¿‡ç¨‹æ›´çº¯ç²¹*
getDerivedStateFromPropsæœ‰ä¸”åªæœ‰ä¸€ä¸ªç”¨é€”ï¼š*ä½¿ç”¨propså»æ´¾ç”Ÿ/æ›´æ–°state*

#### getSnapshotBeforeUpdate
æ‰§è¡Œæ—¶æœºï¼šrenderæ–¹æ³•ä¹‹åï¼ŒçœŸå®domæ›´æ–°ä¹‹å‰
ğŸ“Œå®šä½ï¼šgetSnapshotBeforeUpdateç”Ÿå‘½å‘¨æœŸè®¾è®¡çš„åˆè¡·æ˜¯ä¸ºäº†æ­é…componentDidUpdateä¸€èµ·ï¼Œè¦†ç›–è¿‡æ—¶çš„componentWillUpdateï¼ˆä¸ºå•¥å®ƒè‚¥æ­»ä¸å¯ï¼Œå› ä¸ºå®ƒæŒ¡äº†fiberçš„è·¯ï¼ŒæŒ¡è·¯è€…æ­»ï¼‰
ä½¿ç”¨åœºæ™¯ï¼š è·å–æ›´æ–°å‰çš„DOMä¿¡æ¯ï¼Œæ¯”å¦‚æ»šåŠ¨ä¿¡æ¯ï¼Œç”¨æ¥åšä¸€äº›é¡µé¢æ»šåŠ¨å¤„ç†
å¯ä»¥åŒæ—¶è·å–åˆ°æ›´æ–°å‰çš„DOMå’Œæ›´æ–°å‰åçš„stateå’Œprops
getSnapshotBeforeUpdateçš„è¿”å›å€¼ä½œä¸ºcomponentDidUpdateæ–¹æ³•ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥

### æ•°æ®ç®¡ç†
#### context API
è€ç‰ˆæœ¬ï¼š
1.ä»£ç ä¸å¤Ÿä¼˜é›…
2.æ— æ³•ä¿è¯æ•°æ®çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„åŠæ—¶åŒæ­¥
æ–°ç‰ˆæœ¬ï¼š
1.ä¼˜åŒ–äº†è¿™ä¸€ç‚¹ï¼Œä¿è¯äº†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§
#### Redux
> Reduxæ˜¯ä¸€ä¸ªçŠ¶æ€å®¹å™¨

1.`ä»€ä¹ˆæ˜¯çŠ¶æ€å®¹å™¨`-å­˜æ”¾å…¬å…±æ•°æ®çš„ä»“åº“
ä¾‹å­ï¼šå‡å¦‚æŠŠé¡¹ç›®ä¸­çš„æ‰€æœ‰ç»„ä»¶æ‹‰åˆ°ä¸€ä¸ªé’‰é’‰ç¾¤é‡Œï¼Œé‚£Reduxå……å½“äº†è¿™ä¸ªç¾¤é‡Œçš„`ç¾¤æ–‡ä»¶`è¿™ä¸ªè§’è‰²
2.*åœ¨æ•´ä¸ªReduxçš„å·¥ä½œæµç¨‹ä¸­ï¼Œæ•°æ®æµå‘æ˜¯ä¸¥æ ¼å•å‘çš„*

### React-Hooks
ç†è§£Hooksä¹‹å‰å…ˆçœ‹ä¸€ä¸‹ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶
#### ç±»ç»„ä»¶
> å°±åƒä¸€ä¸ªé‡è£…æˆ˜èˆ°ä¸€æ ·ï¼Œå¾ˆå¼ºå¤§ï¼Œä½†æ˜¯ä¸Šæ‰‹é—¨æ§›ä¹Ÿå¾ˆé«˜ï¼Œéœ€è¦æ¸…æ¥šçš„äº†è§£æ€ä¹ˆå»æ“ä½œè¿™ä¸ªè¶…çº§æˆ˜èˆ°

é€šè¿‡ç»§æ‰¿React.Componentåˆ›å»ºï¼Œç»§æ‰¿Componentçš„stateå’Œç”Ÿå‘½å‘¨æœŸç­‰ï¼Œå¤§è€Œå…¨ï¼Œæˆ‘ç»§æ‰¿åå°±æ‹¥æœ‰äº†å¾ˆå¤šèƒ½åŠ›ï¼Œä»£ä»·å°±æ˜¯å­¦ä¹ æˆæœ¬ï¼Œè€Œä¸”é€»è¾‘æ˜¯å’Œç”Ÿå‘½å‘¨æœŸç²˜åˆåœ¨ä¸€èµ·çš„ï¼Œå¾ˆéš¾æŠ½ç¦»å’Œå¤ç”¨é€»è¾‘

#### å‡½æ•°ç»„ä»¶
> è½»å·§å¿«è‰‡

æ²¡æœ‰stateå’Œç”Ÿå‘½å‘¨æœŸè¿™ä¹ˆé‡çš„ä¸œè¥¿ï¼Œå­¦ä¹ æˆæœ¬å¾ˆä½

#### ä¸¤è€…æœ€å¤§çš„ä¸åŒç‚¹ï¼š
[danåˆ†äº«çš„ç›¸å…³æ–‡ç« ](https://overreacted.io/zh-hans/how-are-function-components-different-from-classes/)
`Function Components capture the rendered values`
å‡½æ•°å¼ç»„ä»¶æ•è·äº†æ¸²æŸ“æ‰€éœ€çš„æ•°æ®

#### hooks
> ä¸€å¥—å¼ºå¤§çš„å·¥å…·ç®±ï¼Œé‡è£…æˆ˜èˆ°é‚£äº›é¢„åˆ¶çš„èƒ½åŠ›è¿™ä¸ªå·¥å…·ç®±é‡Œå‡ ä¹éƒ½æœ‰ï¼Œå¼€å‘è€…å¯ä»¥çµæ´»çš„é€‰æ‹©ç”¨å“ªäº›èƒ½åŠ›ï¼Œè€Œä¸æ˜¯å…¨éƒ¨éƒ½è£…ä¸Š

#### ä¸ºä»€ä¹ˆä¼šå¼•å…¥React-Hooks
1. å‘Šåˆ«éš¾ä»¥ç†è§£çš„Classï¼Œä¸»è¦æ˜¯thiså’Œç”Ÿå‘½å‘¨æœŸ
2. ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘åœ¨ç±»ç»„ä»¶é‡Œæ˜¯åˆ†æ•£åœ¨å„ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼Œè€Œä¸€ä¸ªç”Ÿå‘½å‘¨æœŸä¸­å´ç³…æ‚ç€å„ç§ä¸ç›¸å…³çš„é€»è¾‘ï¼Œé€»è¾‘å’Œç”Ÿå‘½å‘¨æœŸè€¦åˆåœ¨ä¸€èµ·
    ç±»ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬æ›´å¤šçš„æ˜¯é¢å‘ç”Ÿå‘½å‘¨æœŸå»ç¼–å†™é€»è¾‘ä»£ç ï¼Œå’ŒReactç†å¿µç›¸æ‚–ï¼Œåº”è¯¥å…³æ³¨çš„æ˜¯æ•°æ®çš„å˜åŒ–ï¼Œå½“æŸä¸ªæ•°æ®å‘å£°å˜åŒ–è¦åšä»€ä¹ˆï¼Œå°±åƒä¹‹å‰é‚£ä¸ªå¾ˆç»å…¸çš„å…¬å¼UI = render(data);
3. ä½¿çŠ¶æ€é€»è¾‘å¤ç”¨å˜å¾—ç®€å•,è¿‡å»å¤ç”¨é€»è¾‘æ›´å¤šçš„æ˜¯é HOCæˆ–è€…Render Propsï¼Œä»–ä»¬åœ¨å®ç°é€»è¾‘å¤ç”¨çš„åŒæ—¶ä¹Ÿç ´åè€…ç»„ä»¶ç»“æ„ï¼Œæœ€å¸¸ è§çš„å°±æ˜¯åµŒå¥—åœ°ç‹±
4. å‡½æ•°ç»„ä»¶ä»è®¾è®¡æ€æƒ³è§’åº¦æ¥çœ‹æ›´åŠ å¥‘åˆReactç†å¿µ

#### ç†æ€§çœ‹å¾…Hooks
1. Hooksæš‚æ—¶è¿˜æ²¡æœ‰è¡¥é½ç±»ç»„ä»¶çš„èƒ½åŠ›ï¼Œæ¯”å¦‚getSnapshotBeforeUpdateã€componentDidCatch,è¿™äº›ç”Ÿå‘½å‘¨æœŸè¿˜æ˜¯å¼ºä¾èµ–ç±»ç»„ä»¶

### VDOM
#### Reacté€‰ç”¨VDOMæ˜¯ä¸ºäº†æ›´å¥½çš„æ€§èƒ½å—
åœ¨æ•´ä¸ªDOMæ“ä½œçš„æ¼”åŒ–è¿‡ç¨‹ä¸­ï¼Œä¸»è¦çŸ›ç›¾å¹¶ä¸åœ¨äºæ€§èƒ½ï¼Œè€Œåœ¨äºå¼€å‘è€…æ˜¯å¦èƒ½æœ‰è¾ƒå¥½çš„ç ”å‘ä½“éªŒå’Œç ”å‘æ•ˆç‡
**è™šæ‹ŸDOMä¼˜è¶Šä¹‹å¤„åœ¨äºï¼Œå®ƒèƒ½æä¾›æ›´ä¾¿æ·ã€é«˜æ•ˆçš„ç ”å‘æ¨¡å¼çš„åŒæ—¶ï¼Œè¿˜èƒ½å¤Ÿä¿æŒè¾ƒä¸ºç¨³å®šçš„æ€§èƒ½è¡¨ç°**

#### çœŸæ­£ä»·å€¼
1. ç ”å‘ä½“éªŒã€ç ”å‘æ•ˆç‡
2. è·¨å¹³å°çš„é—®é¢˜
3. å·®é‡æ›´æ–°å’Œæ‰¹é‡æ›´æ–°


### Diff
#### 15ç‰ˆæœ¬
1. å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œç›¸åŒç±»å‹çš„ç»„ä»¶å…¶DOMç»“æ„ä¹Ÿç›¸åŒ
* å¦‚æœç±»å‹ç›¸åŒåˆ™è¿›ä¸€æ­¥å¯¹æ¯”ï¼Œå¦‚æœä¸åŒï¼Œåˆ™åˆ é™¤æ›¿æ¢ç­‰æ“ä½œ
2. å¯¹æ¯”æ˜¯åœ¨ç›¸åŒå±‚çº§ä¸Šè¿›è¡Œçš„å¯¹æ¯”ï¼Œå› ä¸ºå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå¾ˆå°‘ä¼šåšDOMç»“æ„çš„è·¨å±‚çº§æ“ä½œï¼Œè€Œä¸”è¿™ç§è·¨å±‚çº§æ“ä½œçš„å¼€é”€æ¯”è¾ƒå¤§ï¼ŒReactå®˜æ–¹ä¹Ÿä¸å»ºè®®è¿™ä¹ˆåšã€‚é¡¹ç›®ä¸­åº”å°½å¯èƒ½ä¿è¯DOMç»“æ„çš„ç¨³å®šæ€§
3. keyå¯ä»¥åœ¨åŒå±‚å¯¹æ¯”çš„æ—¶å€™å¯ä»¥å¤ç”¨èŠ‚ç‚¹

#### 16ç‰ˆæœ¬
ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ

### Fiber
æ ¸å¿ƒï¼šå¯ä¸­æ–­ã€å¯æ¢å¤ã€ä¼˜å…ˆçº§


### ReactDOM.renderå’ŒReactDOM.createRoot
ReactDOM.renderï¼šåŒæ­¥æ‰§è¡Œï¼Œä¸€æ°”å‘µæˆ
ReactDOM.createRootï¼šå¼‚æ­¥æ‰§è¡Œï¼ˆçœ‹æƒ…å†µçš„ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯åŒæ­¥æ‰§è¡Œï¼‰
åŒºåˆ«æ˜¯fiberä¸Šé¢çš„modeï¼Œåœ¨scheduleUpdateOnFiberä¸­ä¼šå»åˆ¤æ–­ï¼Œå¦‚æœæ˜¯åŒæ­¥ï¼Œåˆ™è°ƒç”¨performSyncWorkOnRootï¼Œå¦åˆ™èµ°å¼‚æ­¥

### äº‹ä»¶ç³»ç»Ÿ
16 å’Œ 18 åŒºåˆ«
#### 16
1. æ˜¯åœ¨completeWorké˜¶æ®µå»æ”¶é›†å’ŒæŒ‚è½½çš„
2. åˆæˆäº‹ä»¶å¯¹è±¡ä¼šè¢«æ”¾è¿›ä¸€ä¸ªå«åšâ€œäº‹ä»¶æ± â€çš„åœ°æ–¹ç»Ÿä¸€ç®¡ç†ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯èƒ½å¤Ÿå®ç°äº‹ä»¶å¯¹è±¡çš„å¤ç”¨ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚
```javascript
    function handleChange(e) {
        // this won't work because the event object gets reused.
        setTimeout(() => {
            // è¿™ä¸ªåœ°æ–¹å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºäº‹ä»¶å¯¹è±¡å·²ç»å›æ”¶
            console.log(e.target.value); // too late
        });
    }
```
3. æŒ‰éœ€ç»‘å®šï¼Œå¦‚æœåœ¨completeWorké˜¶æ®µè¿›è¡Œå„ä¸ªèŠ‚ç‚¹çš„propsä¸Šé¢çš„äº‹ä»¶æ”¶é›†çš„æ—¶å€™ï¼Œå¦‚æœå½“å‰äº‹ä»¶å·²ç»ç›‘å¬äº†ï¼Œé‚£ç›´æ¥æŠŠcbpushè¿›é˜Ÿåˆ—é‡Œå°±å¥½äº†ï¼Œæ²¡æœ‰åˆ™åœ¨documentä¸Šç»‘å®šç›‘å¬

4. æ‰§è¡Œæ—¶æœºï¼šæ˜¯åœ¨åŸç”Ÿçš„æ•è·å’Œå†’æ³¡ä¹‹åæ‰æ‰§è¡Œåˆæˆäº‹ä»¶çš„æ•è·å’Œå†’æ³¡

#### 18
1. æ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºå®ŒfiberRootå’ŒrootFiberä¹‹åå°±ç»‘å®šäº‹ä»¶ç›‘å¬ï¼Œå…¨é‡ç›‘å¬
2. å»é™¤äº†äº‹ä»¶æ± ï¼Œå¦‚æœäº‹ä»¶è§¦å‘äº†ï¼Œä¼šå»åˆ¤æ–­å½“å‰è§¦å‘çš„äº‹ä»¶æœ‰æ²¡æœ‰å¯¹åº”çš„listenersï¼Œå¦‚æœæ²¡æœ‰åˆ™è·³è¿‡
3. æ‰§è¡Œæ—¶æœºï¼š æ‰§è¡ŒåŸç”Ÿäº‹ä»¶çš„æ•è·=> åˆæˆäº‹ä»¶çš„æ•è· => åŸç”Ÿäº‹ä»¶çš„å†’æ³¡ => åˆæˆäº‹ä»¶çš„å†’æ³¡

#### æ€»ç»“
å› ä¸º16çš„åˆæˆäº‹ä»¶æ‰§è¡Œæ—¶æœºï¼Œå¯¼è‡´äº†å¦‚æœæˆ‘å»é˜»æ­¢å†’æ³¡æ˜¯é˜»æ­¢ä¸äº†åŸç”Ÿäº‹ä»¶çš„å†’æ³¡äº‹ä»¶çš„
ä¸‹é¢æ˜¯ç›¸åº”çš„è§£é‡Šï¼š
![](./syntheticEvent1.png)
![](./syntheticEvent2.png)

### react18å–æ¶ˆäº†Effect listï¼Œå–è€Œä»£ä¹‹çš„æ˜¯éå†æ•´ä¸ªfiberæ ‘
åœ¨18ç‰ˆæœ¬ä¹‹å‰ï¼ŒbeginWorké˜¶æ®µæ˜¯è‡ªé¡¶å‘ä¸‹æ·±åº¦ä¼˜å…ˆéå†çš„ï¼Œç„¶åå¦‚æœé‡åˆ°å¶å­èŠ‚ç‚¹å°±ä¼šè§¦å‘å½“å‰èŠ‚ç‚¹çš„completeWorkï¼Œé‚£completeWorkè‡ªä¸‹å‘ä¸Šå›åˆ°è·ŸèŠ‚ç‚¹ï¼Œé‚£æ—¢ç„¶å›éƒ½å›å»äº†ï¼Œä¸å¦‚æŠŠeffectæ”¶é›†ä¸€ä¸‹ï¼Œä»è€Œè®©commité˜¶æ®µåäº«å…¶æˆï¼Œç›´æ¥æ‹¿completeWorké˜¶æ®µçš„æˆåŠŸç”¨ã€‚ç„¶åå°±æœ‰äº†completeWorkçš„EffectList
ä½†æ˜¯åœ¨React18ä¸­å–æ¶ˆäº†è¿™ä¸ªeffectListæ•°æ®ç»“æ„ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯éå†æ•´ä¸ªfiberæ ‘ï¼ŒsubtreeFlagsè¾…åŠ©æå‡æ€§èƒ½

### redux
1. ä¸ºä»€ä¹ˆéœ€è¦redux
å‰ç«¯å¤æ‚æ€§å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ç”±äºå¤§é‡çš„æ— åºçš„æ“ä½œå¯¼è‡´çš„ã€‚
æ¯”å¦‚ä¸€ä¸ªå¤æ‚çš„é¡¹ç›®ä¸­å¯èƒ½å­˜åœ¨çˆ¶å­ã€å­çˆ¶ã€å…„å¼Ÿã€è·¨å±‚çº§æˆ–è€…æ˜¯åå‘æ•°æ®æµç­‰ï¼Œæ•´ä¸ªé¡¹ç›®çš„æ•°æ®å¤„ç†ä¼šå˜å¾—å¼‚å¸¸å¤æ‚ä¸”éš¾ä»¥è¿½è¸ªæ•°æ®çš„å˜åŒ–ã€‚
===> reduxçš„ç›®æ ‡æ˜¯ï¼š1.è®©stateçš„å˜å¾—å¯é¢„æµ‹ï¼›2.ç»Ÿä¸€ç®¡ç†åŠ¨ä½œå’ŒçŠ¶æ€

2. applymiddlewareæºç ä¸­æœ‰æ‰§è¡Œæ¯ä¸ªmiddlewareç„¶åä¼ å…¥middleWareAPIï¼Œå…¶ä¸­dispatchä¸ºä»€ä¹ˆç”¨ä¸€ä¸ªåŒ¿åå‡½æ•°åŒ…è£¹
å› ä¸ºè¦ä¿è¯è¢«æ´¾å‘åˆ°æ¯ä¸ªä¸­é—´ä»¶çš„ä¸­çš„dispatchéƒ½æ˜¯åŒä¸€ä¸ªä¸”æ˜¯æœ€æ–°çš„

### React18ä¸­çš„Automatic batching
[](https://github.com/reactwg/react-18/discussions/21)





